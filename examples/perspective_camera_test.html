<!DOCTYPE html>
<html>

<head>
	<title>WebGL Portals | Perspective Camera Test</title>
	<script type="text/javascript" src="/modules/jquery/build/jquery-3.5.1.min.js"></script>
	<script type="importmap">
		{
			"imports": {
				"three": "/modules/three.js/build/three.module.js",
				"three/examples/": "/modules/three.js/examples/"
			}
		}
	</script>
	<script data-src="/src/shaders/portal.vertex" type="x-shader/x-vertex" id="vertexShader"></script>
	<script data-src="/src/shaders/portal.frag" type="x-shader/x-fragment" id="fragmentShader"></script>
	<link rel="stylesheet" href="./css/demo_base.css">
</head>

<body>
	<div id="info">Perspective Camera Test<br>Press &lt;space&gt; to show textures, F to freeze/unfreeze</div>
	<div id="debug_uvs" style="
		position: fixed;
		bottom: 0;
		left: 0;
		right: 0;
		height: 128px;
		display: flex;
		justify-content: center;
		align-items: center;
		background-color: #000;
		padding: 0;
		gap: 0;
	"></div>

	<script type="module">
		import { Utils } from '/examples/js/utils/Utils.js';
		import { PerspectiveCameraTest } from '/examples/js/PerspectiveCameraTest.js';

		$(document).ready(function () {
			Utils.loadShaders(function () {
				var page = new PerspectiveCameraTest();
				page.render();

				// Toggle debug view with spacebar
				document.addEventListener('keydown', function(e) {
					if (e.code === 'Space') {
						e.preventDefault();
						const debugDiv = document.getElementById('debug_uvs');
						if (debugDiv.style.display === 'none') {
							debugDiv.style.display = 'block';
						} else {
							debugDiv.style.display = 'none';
						}
					}
				});
			});
		});
	</script>
</body>

</html>